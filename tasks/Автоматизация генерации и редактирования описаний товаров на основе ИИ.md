## Пользовательская история

**В качестве** администратора/контент-менеджера ЕТИ
**Я хочу** использовать функционал автоматического создания и редактирования описаний товаров на основе ИИ
**Чтобы** улучшить SEO-показатели карточек товаров: повысить индексацию, уменьшить процент малоценных страниц и увеличить органический трафик

## Бизнес-требования

1. **Проблема:**
   - Низкая индексация карточек товаров поисковыми системами из-за неуникальных текстов
   - Большинство страниц попадают в категорию малозначимых, что снижает трафик

2. **Решение:**
   - Интеграция ИИ в ЕТИ для автоматизации создания уникальных описаний товаров
   - Возможность массовой и выборочной обработки карточек товаров

## Функциональные требования

### 1. Интеграция с ИИ-сервисами

- **Основной вариант:** Яндекс GPT (YandexGPT Pro)
- **Альтернативы для тестирования:** GigaChat (SberAI), DeepSeek, Llama 3, Mistral, Saiga 3
- **Критерии выбора модели:** качество текста, скорость, стоимость, поддержка русского языка, возможность локального развертывания

### 2. Пользовательский интерфейс

- Новый блок в интерфейсе ЕТИ для работы с ИИ-функционалом
- Режимы использования:
  - Массовая обработка всех товаров на СК
  - Выборочное редактирование с помощью чекбоксов
- Настройки параметров генерации текстов

### 3. Шаблоны промптов

- **Промпт для рерайта:** "Сделай рерайт этого текста, сохраняя ключевые характеристики товара. Стиль: продающий, лаконичный, с упором на пользу для клиента. Размер до 500 знаков. Текст: [текущее полное описание товара]"
- **Промпт для генерации из названия:** "Возьми название товара "[название товара]" и напиши описание. Стиль: продающий, лаконичный, с упором на пользу для клиента. Размер до 500 знаков."
- **Свободный промпт:** Поле для ввода произвольного запроса
- Возможность редактирования шаблонов и сохранения пользовательских вариантов

### 4. Системные функции

- Обработка запросов к API выбранного ИИ-сервиса
- Сохранение сгенерированных описаний в базу данных ЕТИ
- Асинхронная обработка для массовых операций
- Логирование всех операций и затрат на токены

## Технические требования

1. **Архитектура:**
   - Модульная структура с возможностью замены провайдера ИИ-сервиса
   - API для взаимодействия с выбранными моделями ИИ
   - Очередь задач для массовой обработки

2. **Производительность:**
   - Время ожидания ответа при единичной обработке не более 5 секунд
   - Оптимизация расхода токенов
   - Механизмы защиты от превышения лимитов API

3. **Безопасность:**
   - Защищенное хранение API-ключей
   - Валидация входных и выходных данных

## Критерии приемки

1. Успешная интеграция с выбранным ИИ-сервисом
2. Корректная работа массового и выборочного режимов обработки
3. Адекватность и релевантность генерируемых описаний
4. Удобный пользовательский интерфейс для всех операций
5. Наличие системы мониторинга затрат на токены
6. Документация по использованию функционала

## Метрики успеха

- Улучшение индексации карточек товаров
- Уменьшение процента малоценных страниц
- Увеличение органического трафика
- Экономическая эффективность решения (соотношение затрат на токены и полученного эффекта)