# Описание и контекст

Необходимо разработать новый формат виджета для услуговых карточек, который будет интегрироваться в статьи сайта. Данная задача является частью комплекса задач по типам виджетов и пересекается с задачей по товарному виджету.

**Макет:** [Figma](https://www.figma.com/design/oCIqpQu7yEQfgy4hSxPt7i/%D0%AF-%D0%9F%D0%BE%D0%BA%D1%83%D0%BF%D0%B0%D1%8E?node-id=1290-2701&p=f)

# Цель и бизнес-ценность

Увеличение кликов на виджет, что должно привести к росту внутреннего трафика и конверсии.

# Функциональные требования

## 1. Редактор статей

- Реализовать разделение типов виджетов в режиме редактирования (товарный, услуговый, виджет СК)
- Добавить функционал выбора типа виджета в интерфейсе редактора

## 2. Основной функционал виджета

- После добавления и сохранения виджета в редакторе он должен корректно отображаться в статье
- При получении 404 ошибки (товар/услуга недоступны) виджет должен полностью исчезать из статьи без образования пустого пространства
- Логика статуса "Нет в наличии":
  - Виджет отображается как обычный товар, но вместо кнопки показывается плашка "Нет в наличии"
  - Если товар не вернулся через 3 месяца (ПКТ отдает 404), виджет полностью удаляется из статьи

## 3. Дизайн и функциональность виджета услуги (десктоп)

- **Фотографии:**
  - При наличии нескольких фотографий реализовать карусель со стрелками навигации
  - Фотографии должны быть кликабельны с переходом на ПКТ

- **Ссылки и навигация:**
  - Название компании: кликабельно, ведет на СК
  - Название услуги: кликабельно, ведет на ПКТ, реализовать как анкорную индексируемую ссылку в HTML
  - Кнопка "Подробнее": переход на ПКТ
  - Все ссылки должны открываться в новой вкладке (target="_blank")
  - Ссылки оформлять без подчеркивания

- **Отзывы:**
  - Реализовать интерактивную оценку при наведении курсора (появление анимации в виде руки, движение рейтинга за курсором)
  - Количество отзывов и "написать отзыв" должны быть кликабельны с переходом на блок отзывов в карточке услуги (якорная ссылка)

- **Контакты:**
  - Телефон и адрес должны быть кликабельны с переходом на страницу контактов СК (в десктопе)
  - На мобильных устройствах реализовать гипертекстовую разметку для возможности совершения звонка при клике на телефон
  - При клике на адрес в мобильной версии - переход на страницу контактов СК

- **Мессенджеры:**
  - Кнопки мессенджеров должны быть кликабельны
  - В мобильной версии: переход в соответствующий мессенджер с открытием диалогового окна по указанному телефону
  - В десктопной версии: переход в диалоговое окно, если мессенджер открыт и авторизирован в браузере; в противном случае - переход на главную страницу мессенджера
  - Не отображать иконки мессенджеров, если контакты для связи не указаны

## 4. Требования к статистике

- Интегрировать статистику по виджетам в отчеты СК: https://readyskin.yapokupayu.ru/stats/page_views и https://readyskin.yapokupayu.ru/stats/post
- Переходы по кнопке "Купить на сайте продавца" суммировать в общий отчет переходов в СК: https://readyskin.yapokupayu.ru/stats/yml
- Предусмотреть возможность добавления статистики активностей из виджета компаний в отчет: https://readyskin.yapokupayu.ru/stats/activities

# Критерии приемки

1. Виджет должен добавляться согласно описанным условиям и отвечать всем требованиям ТЗ
2. Все интерактивные элементы (карусель, ссылки, кнопки) должны корректно работать
3. Виджет должен корректно отображаться на всех типах устройств
4. Статистика должна корректно учитываться в соответствующих отчетах
5. При недоступности товара/услуги (404) виджет должен полностью удаляться из статьи без нарушения верстки

**Примечание:** Функционал добавления в избранное будет описан отдельно при проведении работ по личному кабинету.

**Важно:** Формирование виджета RSS будет описано в отдельной задаче.